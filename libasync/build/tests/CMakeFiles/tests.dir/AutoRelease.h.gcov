        -:    0:Source:/Users/wjp/Desktop/workspace/libasync/libasync/./src/AutoRelease.h
        -:    0:Graph:/Users/wjp/Desktop/workspace/libasync/libasync/build/tests/CMakeFiles/tests.dir/ChaseLevDequeTOT.cc.gcno
        -:    0:Data:-
        -:    0:Runs:0
        -:    0:Programs:0
        -:    1:/*
        -:    2:* MIT License
        -:    3:*
        -:    4:* Copyright (c) 2018 jipeng wu
        -:    5:* <recvfromsockaddr at gmail dot com>
        -:    6:*
        -:    7:* Permission is hereby granted, free of charge, to any person obtaining a copy
        -:    8:* of this software and associated documentation files (the "Software"), to deal
        -:    9:* in the Software without restriction, including without limitation the rights
        -:   10:* to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
        -:   11:* copies of the Software, and to permit persons to whom the Software is
        -:   12:* furnished to do so, subject to the following conditions:
        -:   13:*
        -:   14:* The above copyright notice and this permission notice shall be included in all
        -:   15:* copies or substantial portions of the Software.
        -:   16:*
        -:   17:* THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
        -:   18:* IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
        -:   19:* FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
        -:   20:* AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
        -:   21:* LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
        -:   22:* OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
        -:   23:* SOFTWARE.
        -:   24:*/
        -:   25:
        -:   26:#pragma once
        -:   27:#include <functional>
        -:   28:
        -:   29:namespace wjp{
        -:   30:
        -:   31:template <typename T>
        -:   32:class AutoDelete{
        -:   33:public:
    #####:   34:    AutoDelete(T*arr):arr(arr){}
    #####:   35:    ~AutoDelete(){
    #####:   36:        delete arr;
    #####:   37:    }
        -:   38:private:
        -:   39:    T* arr;
        -:   40:};
        -:   41:
        -:   42:template <typename T>
        -:   43:class AutoRelease{
        -:   44:public:
        -:   45:    AutoRelease(T*arr, std::function<void(T*)> deleter):arr(arr), deleter(deleter){}
        -:   46:    ~AutoRelease(){
        -:   47:        if(deleter==nullptr) delete arr;
        -:   48:        else deleter(arr);
        -:   49:    }
        -:   50:private:
        -:   51:    T* arr;
        -:   52:    std::function<void(T*)> deleter;
        -:   53:};
        -:   54:
        -:   55:
        -:   56:}
